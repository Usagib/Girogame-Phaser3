!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class i extends Phaser.Scene{constructor(){super("mainMenu")}preload(){this.load.image("menubg","../src/assets/city.png"),this.load.image("menutext","../src/assets/bootmenu.png"),this.load.image("piso","../src/assets/platform.png"),this.load.spritesheet("robot","../src/assets/bot.png",{frameWidth:52,frameHeight:52}),this.load.spritesheet("firebullet","../src/assets/firebullet.png",{frameWidth:40,frameHeight:40}),this.load.spritesheet("coin","../src/assets/coin.png",{frameWidth:120,frameHeight:120}),this.load.spritesheet("whiteslime","../src/assets/slimewhite.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("redslime","../src/assets/slimered.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("greenslime","../src/assets/slimegreen.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("littleslime","../src/assets/littleslime.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("skull","../src/assets/fire-skull.png",{frameWidth:96,frameHeight:112}),this.load.spritesheet("bossidle","../src/assets/bossidle.png",{frameWidth:160,frameHeight:144}),this.load.spritesheet("bossattack","../src/assets/bossattack.png",{frameWidth:192,frameHeight:176}),this.load.spritesheet("bossbullet","../src/assets/bossbullet.png",{frameWidth:130,frameHeight:130}),this.load.image("tiles","../src/assets/tilemap/tileset1.png"),this.load.tilemapTiledJSON("map","../src/assets/tilemap/map1.json"),this.load.image("background4","../src/assets/background/back1.png"),this.load.image("background3","../src/assets/background/farback.png"),this.load.image("background2","../src/assets/background/far.png"),this.load.image("background1","../src/assets/background/farfront.png"),this.load.audio("rudebuster","../src/assets/levelmusic.mp3"),this.load.audio("orchestrabuster","../src/assets/bossmusic.mp3"),this.load.audio("chillbuster","../src/assets/bootmusic.mp3")}create(){this.chillMusic=this.sound.add("chillbuster"),this.chillMusic.play({loop:!0,volume:.1}),this.bgBack=this.add.tileSprite(0,0,1024,600,"background4"),this.bgBack.setOrigin(0,0),this.bgBack.setScrollFactor(0),this.bgBack.setScale(6),this.bgMid1=this.add.tileSprite(0,0,1024,600,"background3"),this.bgMid1.setOrigin(0,0),this.bgMid1.setScrollFactor(0),this.bgMid1.setScale(6),this.bgMid2=this.add.tileSprite(0,0,1024,600,"background2"),this.bgMid2.setOrigin(0,0),this.bgMid2.setScrollFactor(0),this.bgMid2.setScale(6),this.bgFront=this.add.tileSprite(0,0,1024,600,"background1"),this.bgFront.setOrigin(0,0),this.bgFront.setScrollFactor(0),this.bgFront.setScale(6),this.bootTxt=this.add.image(512,300,"menutext")}update(){this.bgMid1.tilePositionX+=.01,this.bgMid2.tilePositionX+=.04,this.bgFront.tilePositionX+=.07,this.pointer=this.input.activePointer,this.pointer.isDown&&this.scene.start("playGame")}}class a extends Phaser.Scene{constructor(){super("playGame")}preload(){}create(){function e(e,t){e.health-=1,e.setTint(16711680),this.time.addEvent({delay:200,callback:()=>{e.setTint(16777215)}}),t.destroy(),e.health<=0&&(score+=5,e.destroy(),coins.create(e.x,e.y,"coin"),coins.children.iterate((function(e){e.setScale(.2),e.anims.play("coinidle",!0)})))}function t(e,t){e.x-=20,score-=50,e.setTint(16711680),e.health-=10,console.log(e.health),this.time.addEvent({delay:100,callback:()=>{e.x-=25,e.setTint(16777215)}}),e.health<=0&&(score-=1e3,gameOver=!0,console.log("game over"))}function s(e,t){e.x-=15,e.setTint(16711680),e.health-=10,score-=50,t.destroy(),console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.x-=15,e.setTint(16777215)}}),e.health<=0&&(gameOver=!0,console.log("game over"),console.log(score))}function i(e,t){e.disableBody(!0,!0)}music=this.sound.add("rudebuster"),bossMusic=this.sound.add("orchestrabuster"),music.play({loop:!0,volume:.1}),bgBack=this.add.tileSprite(0,0,config.width,config.height,"background4"),bgBack.setOrigin(0,0),bgBack.setScrollFactor(0),bgBack.setScale(6),bgMid1=this.add.tileSprite(0,0,config.width,config.height,"background3"),bgMid1.setOrigin(0,0),bgMid1.setScrollFactor(0),bgMid1.setScale(6),bgMid2=this.add.tileSprite(0,0,config.width,config.height,"background2"),bgMid2.setOrigin(0,0),bgMid2.setScrollFactor(0),bgMid2.setScale(6),bgFront=this.add.tileSprite(0,0,config.width,config.height,"background1"),bgFront.setOrigin(0,0),bgFront.setScrollFactor(0),bgFront.setScale(6),scoreText=this.add.text(16,360,"Score: 0",{fontSize:"32px",fill:"#fff"}),healthText=this.add.text(16,420,"Health: 0",{fontSize:"32px",fill:"#fff"}),this.cameras.main.setBounds(0,0,7700,950),map=this.make.tilemap({key:"map"}),tileset=map.addTilesetImage("tileset1","tiles"),platforms=map.createStaticLayer("GroundLayer",tileset,0,200),platforms.setScale(.3),platforms.setCollisionByExclusion(-1,!0),player=this.physics.add.sprite(100,450,"robot"),player.health=100,boss=this.physics.add.sprite(7380,300,"bossidle"),boss.setGravityY(-300),boss.setScale(1.3),boss.health=50,coins=this.physics.add.group({key:"coin",repeat:200,setXY:{x:100,y:0,stepX:100}}),coins.children.iterate((function(e){e.setScale(.2),e.setBounce(.5)})),fireBullets=this.physics.add.group(),whiteSlimes=this.physics.add.group({key:"whiteslime",repeat:10,setXY:{x:225,y:0,stepX:555}}),whiteSlimes.children.iterate((function(e){e.health=3,e.setScale(1.5),e.setSize(2,8,!0)})),redSlimes=this.physics.add.group({key:"redslime",repeat:Phaser.Math.Between(20,25),setXY:{x:300,y:0,stepX:Phaser.Math.Between(200,600),stepY:Phaser.Math.Between(0,10)}}),redSlimes.children.iterate((function(e){e.health=3,e.setScale(2),e.setSize(4,10,!0)})),this.time.addEvent({delay:5e3,callback:()=>{redSlimes.children.iterate((function(e){e.setVelocityY(-300)}))},loop:!0}),fireSkulls=this.physics.add.group(),this.time.addEvent({delay:2500,callback:()=>{fireSkulls.create(Phaser.Math.Between(2e3,6300),Phaser.Math.Between(0,900),"skull"),fireSkulls.children.iterate((function(e){e.setGravityY(-300),e.setScale(.7),e.setVelocityX(-160),e.setSize(4,8,!0),e.anims.play("skullfly",!0),e.health=2}))},loop:!0}),greenSlimes=this.physics.add.group(),littleSlimes=this.physics.add.group(),bossBullets=this.physics.add.group(),this.time.addEvent({delay:1e4,callback:()=>{greenSlimes.create(Phaser.Math.Between(1500,6e3),Phaser.Math.Between(500,900),"greenslime"),greenSlimes.children.iterate((function(e){e.setScale(1.7),e.setGravityY(-305),e.anims.play("floatslime",!0),e.setSize(4,4,!0),e.health=5}))},loop:!0}),this.time.addEvent({delay:6e3,callback:()=>{greenSlimes.children.iterate((function(e){littleSlimes.create(e.x,e.y,"littleslime"),littleSlimes.children.iterate((function(e){e.setScale(1.3),e.setBounce(.5),e.setSize(1,1,!0),e.health=1}))}))},loop:!0}),this.time.addEvent({delay:3e3,callback:()=>{littleSlimes.children.iterate((function(e){e.setVelocityY(-300),e.setVelocityX(-30)}))},loop:!0}),player.setBounce(.2),player.body.setGravityY(300),this.cameras.main.startFollow(player,!0),this.anims.create({key:"bossbullet",frames:this.anims.generateFrameNumbers("bossbullet",{start:0,end:6}),frameRate:5,yoyo:!0,repeat:-1}),this.anims.create({key:"bossattack",frames:this.anims.generateFrameNumbers("bossattack",{start:0,end:7}),frameRate:20}),this.anims.create({key:"bossidle",frames:this.anims.generateFrameNumbers("bossidle",{start:0,end:5}),frameRate:5,repeat:-1}),this.anims.create({key:"skullfly",frames:this.anims.generateFrameNumbers("skull",{start:0,end:7}),frameRate:10,repeat:-1}),this.anims.create({key:"walkslime",frames:this.anims.generateFrameNumbers("whiteslime",{start:0,end:15}),frameRate:6,repeat:-1}),this.anims.create({key:"jumpslime",frames:this.anims.generateFrameNumbers("redslime",{start:0,end:15}),frameRate:6,repeat:-1}),this.anims.create({key:"floatslime",frames:this.anims.generateFrameNumbers("greenslime",{start:0,end:15}),frameRate:12,repeat:-1}),this.anims.create({key:"fireshoot",frames:this.anims.generateFrameNumbers("firebullet",{start:0,end:8}),frameRate:5}),this.anims.create({key:"coinidle",frames:this.anims.generateFrameNumbers("coin",{start:0,end:7}),frameRate:5,repeat:-1}),this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("robot",{start:0,end:6}),frameRate:3,repeat:-1}),this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("robot",{start:8,end:14}),frameRate:5,repeat:-1}),this.anims.create({key:"shoot",frames:this.anims.generateFrameNumbers("robot",{start:16,end:20}),frameRate:30}),this.anims.create({key:"jump",frames:this.anims.generateFrameNumbers("robot",{start:32,end:36}),frameRate:10,repeat:-1}),this.anims.create({key:"death",frames:this.anims.generateFrameNumbers("robot",{start:35,end:44}),frameRate:5}),cursors=this.input.keyboard.createCursorKeys(),this.physics.add.collider(player,platforms),this.physics.add.collider(coins,platforms),this.physics.add.collider(boss,platforms),this.physics.add.collider(bossBullets,platforms,i,null,this),this.physics.add.collider(whiteSlimes,platforms),this.physics.add.collider(redSlimes,platforms),this.physics.add.collider(littleSlimes,platforms),this.physics.add.overlap(whiteSlimes,fireBullets,e,null,this),this.physics.add.overlap(redSlimes,fireBullets,e,null,this),this.physics.add.overlap(greenSlimes,fireBullets,e,null,this),this.physics.add.overlap(littleSlimes,fireBullets,e,null,this),this.physics.add.overlap(fireSkulls,fireBullets,e,null,this),this.physics.add.collider(boss,fireBullets,(function(e,t){e.health-=1,e.setTint(16711680),console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.setTint(16777215)}}),t.destroy(),47===e.health&&(music.pause(),bossMusic.play({loop:!0,volume:.1}));e.health<=0&&(e.destroy(),this.physics.pause(),score+=200)}),null,this),this.physics.add.overlap(player,whiteSlimes,(function(e,t){e.x-=15,e.setTint(16711680),e.health-=5,score-=50,console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.x-=15,e.setTint(16777215)}}),e.health<=0&&(gameOver=!0,console.log("game over"))}),null,this),this.physics.add.overlap(player,redSlimes,t,null,this),this.physics.add.overlap(player,littleSlimes,(function(e,t){e.x-=15,e.setTint(16711680),e.health-=5,score-=50,t.destroy(),console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.x-=15,e.setTint(16777215)}}),e.health<=0&&(gameOver=!0,console.log("game over"))}),null,this),this.physics.add.overlap(player,fireSkulls,s,null,this),this.physics.add.overlap(player,greenSlimes,t,null,this),this.physics.add.overlap(player,bossBullets,s,null,this),this.physics.add.collider(fireBullets,platforms,i,null,this),this.physics.add.overlap(player,coins,(function(e,t){t.disableBody(!0,!0),score+=10}),null,this),this.anims.staggerPlay("coinidle",coins.getChildren(),.03),this.anims.staggerPlay("walkslime",whiteSlimes.getChildren(),.03),this.anims.staggerPlay("jumpslime",redSlimes.getChildren(),.03),this.anims.staggerPlay("skullfly",fireSkulls.getChildren(),.03),this.time.addEvent({delay:528,callback:()=>{boss.anims.play("bossattack");bossBullets.create(boss.x,boss.y,"bossbullet");bossBullets.children.iterate((function(e){e.setScale(.3),e.setGravityY(-290),e.setVelocityX(-200),e.setBounce(.8),e.setSize(4,4,!0),e.anims.play("bossbullet",!0)}))},loop:!0}),bossTween=this.tweens.add({targets:boss,props:{y:{value:"+=500",duration:2125}},ease:"sine.easeInOut",yoyo:!0,repeat:-1}),whiteSlimeTween=this.tweens.add({targets:whiteSlimes.getChildren(),props:{x:{value:"+=85",duration:1500}},ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}update(){healthText.x>=player.x+550&&(scoreText.x=player.x-700,healthText.x=player.x-700),scoreText.setText("Score: "+score),healthText.setText("Health: "+player.health);var e=this.cameras.main;if(this.anims.staggerPlay("fireshoot",fireBullets.getChildren(),.03),!gameOver){if(cursors.left.isDown?(player.setVelocityX(-160),player.anims.play("walk",!0),e.scrollX-=4,scoreText.x-=2.5,healthText.x-=2.5,bgMid1.tilePositionX-=.1,bgMid2.tilePositionX-=.2,bgFront.tilePositionX-=.3):cursors.right.isDown?(player.setVelocityX(160),player.anims.play("walk",!0),e.scrollX+=4,scoreText.x+=4,healthText.x+=4,bgMid1.tilePositionX+=.1,bgMid2.tilePositionX+=.2,bgFront.tilePositionX+=.3):(player.setVelocityX(0),player.anims.play("idle",!0)),cursors.up.isDown&&player.body.onFloor()&&(player.setVelocityY(-550),player.anims.play("jump",!0)),this.input.keyboard.checkDown(cursors.space,300)){console.log(player.x);var t=fireBullets.create(player.x+40,player.y+15,"firebullet");cursors.left.isDown?t.setVelocityX(-500):t.setVelocityX(500),t.body.setGravityY(-300)}player.body.velocity.x>0?player.setFlipX(!1):player.body.velocity.x<0&&player.setFlipX(!0)}}}var l={type:Phaser.AUTO,width:1024,height:600,background:"#ffffff",physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[i,a]};new Phaser.Game(l)}]);