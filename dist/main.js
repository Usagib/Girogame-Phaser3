!function(e){var s={};function t(i){if(s[i])return s[i].exports;var a=s[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=s,t.d=function(e,s,i){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var a in e)t.d(i,a,function(s){return e[s]}.bind(null,a));return i},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p="",t(t.s=0)}([function(e,s,t){"use strict";t.r(s);var i=async()=>{let e=await fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/SZ7da2t7aZzwyxcKhZOh/scores",{mode:"cors"});return await e.json()};class a extends Phaser.Scene{constructor(){super("mainMenu")}preload(){this.load.image("menubg","../src/assets/city.png"),this.load.image("menutext","../src/assets/bootmenu.png"),this.load.image("piso","../src/assets/platform.png"),this.load.spritesheet("robot","../src/assets/bot.png",{frameWidth:52,frameHeight:52}),this.load.spritesheet("firebullet","../src/assets/firebullet.png",{frameWidth:40,frameHeight:40}),this.load.spritesheet("coin","../src/assets/coin.png",{frameWidth:120,frameHeight:120}),this.load.spritesheet("whiteslime","../src/assets/slimewhite.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("redslime","../src/assets/slimered.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("greenslime","../src/assets/slimegreen.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("littleslime","../src/assets/littleslime.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("skull","../src/assets/fire-skull.png",{frameWidth:96,frameHeight:112}),this.load.spritesheet("bossidle","../src/assets/bossidle.png",{frameWidth:160,frameHeight:144}),this.load.spritesheet("bossattack","../src/assets/bossattack.png",{frameWidth:192,frameHeight:176}),this.load.spritesheet("bossbullet","../src/assets/bossbullet.png",{frameWidth:130,frameHeight:130}),this.load.image("tiles","../src/assets/tilemap/tileset1.png"),this.load.tilemapTiledJSON("map","../src/assets/tilemap/map1.json"),this.load.image("background4","../src/assets/background/back1.png"),this.load.image("background3","../src/assets/background/farback.png"),this.load.image("background2","../src/assets/background/far.png"),this.load.image("background1","../src/assets/background/farfront.png"),this.load.audio("rudebuster","../src/assets/levelmusic.mp3"),this.load.audio("orchestrabuster","../src/assets/bossmusic.mp3"),this.load.audio("chillbuster","../src/assets/bootmusic.mp3")}create(){this.chillMusic=this.sound.add("chillbuster"),this.chillMusic.play({loop:!0,volume:.1}),this.bgBack=this.add.tileSprite(0,0,1024,600,"background4"),this.bgBack.setOrigin(0,0),this.bgBack.setScrollFactor(0),this.bgBack.setScale(6),this.bgMid1=this.add.tileSprite(0,0,1024,600,"background3"),this.bgMid1.setOrigin(0,0),this.bgMid1.setScrollFactor(0),this.bgMid1.setScale(6),this.bgMid2=this.add.tileSprite(0,0,1024,600,"background2"),this.bgMid2.setOrigin(0,0),this.bgMid2.setScrollFactor(0),this.bgMid2.setScale(6),this.bgFront=this.add.tileSprite(0,0,1024,600,"background1"),this.bgFront.setOrigin(0,0),this.bgFront.setScrollFactor(0),this.bgFront.setScale(6),this.bootTxt=this.add.image(512,300,"menutext"),this.pointer=this.input.activePointer,this.input.mouse.disableContextMenu(),this.input.on("pointerup",e=>{this.pointer.x>512&&this.pointer.y>500&&this.pointer.leftButtonReleased()&&(this.chillMusic.pause(),this.scene.start("playGame")),this.pointer.x<512&&this.pointer.y>500&&this.pointer.leftButtonReleased()&&(this.chillMusic.pause(),i().then(e=>{const{result:s}=e;this.scene.start("highScores",{board:s})}))})}update(){this.bgMid1.tilePositionX+=.01,this.bgMid2.tilePositionX+=.04,this.bgFront.tilePositionX+=.07}}class r extends Phaser.Scene{constructor(){super("playGame")}preload(){}create(){this.score=0,this.gameOver=!1,this.gameWin=!1,this.music=this.sound.add("rudebuster"),this.bossMusic=this.sound.add("orchestrabuster"),this.music.play({loop:!0,volume:.1}),this.bgBack=this.add.tileSprite(0,0,800,600,"background4"),this.bgBack.setOrigin(0,0),this.bgBack.setScrollFactor(0),this.bgBack.setScale(6),this.bgMid1=this.add.tileSprite(0,0,800,600,"background3"),this.bgMid1.setOrigin(0,0),this.bgMid1.setScrollFactor(0),this.bgMid1.setScale(6),this.bgMid2=this.add.tileSprite(0,0,800,600,"background2"),this.bgMid2.setOrigin(0,0),this.bgMid2.setScrollFactor(0),this.bgMid2.setScale(6),this.bgFront=this.add.tileSprite(0,0,800,600,"background1"),this.bgFront.setOrigin(0,0),this.bgFront.setScrollFactor(0),this.bgFront.setScale(6),this.scoreText=this.add.text(16,360,"Score: 0",{fontSize:"32px",fill:"#fff"}),this.healthText=this.add.text(16,420,"Health: 0",{fontSize:"32px",fill:"#fff"}),this.cameras.main.setBounds(0,0,7650,950),this.map=this.make.tilemap({key:"map"}),this.tileset=this.map.addTilesetImage("tileset1","tiles"),this.platforms=this.map.createStaticLayer("GroundLayer",this.tileset,0,200),this.platforms.setScale(.3),this.platforms.setCollisionByExclusion(-1,!0),this.player=this.physics.add.sprite(100,450,"robot"),this.player.health=100,this.nameGen="Player"+Phaser.Math.Between(1,20),this.boss=this.physics.add.sprite(7380,300,"bossidle"),this.boss.setGravityY(-300),this.boss.setScale(1.3),this.boss.health=50,this.coins=this.physics.add.group({key:"coin",repeat:200,setXY:{x:100,y:0,stepX:100}}),this.coins.children.iterate(e=>{e.setScale(.2),e.setBounce(.5)}),this.fireBullets=this.physics.add.group(),this.whiteSlimes=this.physics.add.group({key:"whiteslime",repeat:Phaser.Math.Between(20,30),setXY:{x:Phaser.Math.Between(300,400),y:0,stepX:Phaser.Math.Between(100,300)}}),this.whiteSlimes.children.iterate(e=>{e.health=3,e.setScale(1.5),e.setSize(2,8,!0)}),this.redSlimes=this.physics.add.group({key:"redslime",repeat:Phaser.Math.Between(20,35),setXY:{x:300,y:0,stepX:Phaser.Math.Between(200,600),stepY:Phaser.Math.Between(0,10)}}),this.redSlimes.children.iterate(e=>{e.health=3,e.setScale(2),e.setSize(4,10,!0)}),this.fireSkulls=this.physics.add.group(),this.greenSlimes=this.physics.add.group(),this.littleSlimes=this.physics.add.group(),this.bossBullets=this.physics.add.group(),this.player.setBounce(.2),this.player.body.setGravityY(300),this.cameras.main.startFollow(this.player,!0),this.anims.create({key:"bossbullet",frames:this.anims.generateFrameNumbers("bossbullet",{start:0,end:6}),frameRate:5,yoyo:!0,repeat:-1}),this.anims.create({key:"bossattack",frames:this.anims.generateFrameNumbers("bossattack",{start:0,end:7}),frameRate:20}),this.anims.create({key:"bossidle",frames:this.anims.generateFrameNumbers("bossidle",{start:0,end:5}),frameRate:5,repeat:-1}),this.anims.create({key:"skullfly",frames:this.anims.generateFrameNumbers("skull",{start:0,end:7}),frameRate:10,repeat:-1}),this.anims.create({key:"walkslime",frames:this.anims.generateFrameNumbers("whiteslime",{start:0,end:15}),frameRate:6,repeat:-1}),this.anims.create({key:"jumpslime",frames:this.anims.generateFrameNumbers("redslime",{start:0,end:15}),frameRate:6,repeat:-1}),this.anims.create({key:"floatslime",frames:this.anims.generateFrameNumbers("greenslime",{start:0,end:15}),frameRate:12,repeat:-1}),this.anims.create({key:"fireshoot",frames:this.anims.generateFrameNumbers("firebullet",{start:0,end:8}),frameRate:5}),this.anims.create({key:"coinidle",frames:this.anims.generateFrameNumbers("coin",{start:0,end:7}),frameRate:5,repeat:-1}),this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("robot",{start:0,end:6}),frameRate:3,repeat:-1}),this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("robot",{start:8,end:14}),frameRate:5,repeat:-1}),this.anims.create({key:"shoot",frames:this.anims.generateFrameNumbers("robot",{start:16,end:20}),frameRate:30}),this.anims.create({key:"jump",frames:this.anims.generateFrameNumbers("robot",{start:32,end:36}),frameRate:10,repeat:-1}),this.anims.create({key:"death",frames:this.anims.generateFrameNumbers("robot",{start:35,end:44}),frameRate:5});const e=(e,s)=>{e.health-=1,e.setTint(16711680),this.time.addEvent({delay:200,callback:()=>{e.setTint(16777215)}}),s.destroy(),e.health<=0&&(this.score+=5,e.destroy(),this.coins.create(e.x,e.y,"coin"),this.coins.children.iterate(e=>{e.setScale(.2),e.anims.play("coinidle",!0)}))},s=(e,s)=>{e.x-=20,this.score-=50,e.setTint(16711680),e.health-=10,console.log(e.health),this.time.addEvent({delay:100,callback:()=>{e.x-=25,e.setTint(16777215)}}),e.health<=0&&(this.gameOver=!0)},t=(e,s)=>{e.x-=15,e.setTint(16711680),e.health-=10,this.score-=50,s.destroy(),console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.x-=15,e.setTint(16777215)}}),e.health<=0&&(this.gameOver=!0)},i=(e,s)=>{e.disableBody(!0,!0)};this.cursors=this.input.keyboard.createCursorKeys(),this.physics.add.collider(this.player,this.platforms),this.physics.add.collider(this.coins,this.platforms),this.physics.add.collider(this.boss,this.platforms),this.physics.add.collider(this.bossBullets,this.platforms,i,null,this),this.physics.add.collider(this.whiteSlimes,this.platforms),this.physics.add.collider(this.redSlimes,this.platforms),this.physics.add.collider(this.littleSlimes,this.platforms),this.physics.add.collider(this.fireBullets,this.platforms,i,null,this),this.physics.add.collider(this.boss,this.fireBullets,(e,s)=>{e.health-=1,e.setTint(16711680),console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.setTint(16777215)}}),s.destroy(),47===e.health&&(this.music.pause(),this.bossMusic.play({loop:!0,volume:.1})),e.health<=0&&(this.score+=200,e.destroy(),this.physics.pause(),this.bossMusic.pause(),this.gameWin=!0)},null,this),this.physics.add.overlap(this.whiteSlimes,this.fireBullets,e,null,this),this.physics.add.overlap(this.redSlimes,this.fireBullets,e,null,this),this.physics.add.overlap(this.greenSlimes,this.fireBullets,e,null,this),this.physics.add.overlap(this.littleSlimes,this.fireBullets,e,null,this),this.physics.add.overlap(this.fireSkulls,this.fireBullets,e,null,this),this.physics.add.overlap(this.player,this.whiteSlimes,(e,s)=>{e.x-=15,e.setTint(16711680),e.health-=5,this.score-=50,console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.x-=15,e.setTint(16777215)}}),e.health<=0&&(this.gameOver=!0)},null,this),this.physics.add.overlap(this.player,this.redSlimes,s,null,this),this.physics.add.overlap(this.player,this.littleSlimes,(e,s)=>{e.x-=15,e.setTint(16711680),e.health-=5,this.score-=50,s.destroy(),console.log(e.health),this.time.addEvent({delay:200,callback:()=>{e.x-=15,e.setTint(16777215)}}),e.health<=0&&(this.gameOver=!0)},null,this),this.physics.add.overlap(this.player,this.fireSkulls,t,null,this),this.physics.add.overlap(this.player,this.greenSlimes,s,null,this),this.physics.add.overlap(this.player,this.bossBullets,t,null,this),this.physics.add.overlap(this.player,this.coins,(e,s)=>{s.disableBody(!0,!0),this.score+=10},null,this),this.anims.staggerPlay("coinidle",this.coins.getChildren(),.03),this.anims.staggerPlay("walkslime",this.whiteSlimes.getChildren(),.03),this.anims.staggerPlay("jumpslime",this.redSlimes.getChildren(),.03),this.anims.staggerPlay("skullfly",this.fireSkulls.getChildren(),.03),this.time.addEvent({delay:628,callback:()=>{this.boss.anims.play("bossattack"),this.bullet=this.bossBullets.create(this.boss.x,this.boss.y,"bossbullet"),this.bullet=this.bossBullets.create(this.boss.x+10,this.boss.y+20,"bossbullet"),this.bullet=this.bossBullets.create(this.boss.x+10,this.boss.y-20,"bossbullet"),this.bossBullets.children.iterate(e=>{e.setScale(.3),e.setGravityY(-290),e.setVelocityX(-200),e.setBounce(.8),e.setSize(4,4,!0),e.anims.play("bossbullet",!0)})},loop:!0}),this.time.addEvent({delay:1e3,callback:()=>{this.greenSlimes.create(Phaser.Math.Between(1500,7300),Phaser.Math.Between(800,1e3),"greenslime"),this.greenSlimes.children.iterate(e=>{e.setScale(1.7),e.setGravityY(-305),e.anims.play("floatslime",!0),e.setSize(4,4,!0),e.health=2})},loop:!0}),this.time.addEvent({delay:2e3,callback:()=>{this.redSlimes.children.iterate(e=>{e.setVelocityY(-300)})},loop:!0}),this.time.addEvent({delay:1e3,callback:()=>{this.fireSkulls.create(Phaser.Math.Between(2e3,7300),Phaser.Math.Between(0,900),"skull"),this.fireSkulls.children.iterate(e=>{e.setGravityY(-300),e.setScale(.7),e.setVelocityX(-160),e.setSize(4,8,!0),e.anims.play("skullfly",!0),e.health=2})},loop:!0}),this.bossTween=this.tweens.add({targets:this.boss,props:{y:{value:"+=500",duration:2125}},ease:"sine.easeInOut",yoyo:!0,repeat:-1}),this.whiteSlimeTween=this.tweens.add({targets:this.whiteSlimes.getChildren(),props:{x:{value:"+=85",duration:1500}},ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}update(){return this.healthText.x>=this.player.x+550&&(this.scoreText.x=this.player.x-700,this.healthText.x=this.player.x-700),this.scoreText.setText("Score: "+this.score),this.healthText.setText("Health: "+this.player.health),this.cam=this.cameras.main,this.anims.staggerPlay("fireshoot",this.fireBullets.getChildren(),.03),this.gameOver?(this.bossMusic.pause(),this.music.pause(),void this.scene.start("gameOver",{name:this.nameGen,score:this.score})):this.gameWin?(this.bossMusic.pause(),this.music.pause(),void this.scene.start("gameWin",{name:this.nameGen,score:this.score})):(this.cursors.left.isDown?(this.player.setVelocityX(-160),this.player.anims.play("walk",!0),this.cam.scrollX-=4,this.scoreText.x+=6,this.healthText.x+=6,this.bgMid1.tilePositionX-=.1,this.bgMid2.tilePositionX-=.2,this.bgFront.tilePositionX-=.3):this.cursors.right.isDown?(this.player.setVelocityX(160),this.player.anims.play("walk",!0),this.cam.scrollX+=4,this.scoreText.x+=6,this.healthText.x+=6,this.bgMid1.tilePositionX+=.1,this.bgMid2.tilePositionX+=.2,this.bgFront.tilePositionX+=.3):(this.player.setVelocityX(0),this.player.anims.play("idle",!0)),this.cursors.up.isDown&&this.player.body.onFloor()&&(this.player.setVelocityY(-550),this.player.anims.play("jump",!0)),this.input.keyboard.checkDown(this.cursors.space,300)&&(this.shoot=this.fireBullets.create(this.player.x+40,this.player.y+15,"firebullet"),this.cursors.left.isDown?this.shoot.setVelocityX(-500):this.shoot.setVelocityX(500),this.shoot.body.setGravityY(-300)),void(this.player.body.velocity.x>0?this.player.setFlipX(!1):this.player.body.velocity.x<0&&this.player.setFlipX(!0)))}}var h=(e,s)=>{const t={user:e,score:s},i=new Request("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/SZ7da2t7aZzwyxcKhZOh/scores",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})});fetch(i).then(e=>e.json()).then(e=>console.log(e)).catch(e=>console.log(e))};class l extends Phaser.Scene{constructor(){super("gameOver")}init(e){this.finalScore=e.score,this.leadername=e.name}preload(){this.load.image("gameoverscreen","../src/assets/gameoverscreen.png")}create(){this.chillMusic=this.sound.add("chillbuster"),this.chillMusic.play({loop:!0,volume:.1}),this.add.image(512,300,"gameoverscreen"),this.add.text(350,500,"Score"+this.finalScore,{fontSize:"32px",fill:"#fff"}),this.pointer=this.input.activePointer,this.input.mouse.disableContextMenu(),this.input.on("pointerup",e=>{this.pointer.leftButtonReleased()&&(this.chillMusic.pause(),h(this.leadername,this.finalScore),this.scene.start("mainMenu"))})}update(){}}class o extends Phaser.Scene{constructor(){super("gameWin")}init(e){this.finalScore=e.score,this.leadername=e.name}preload(){this.load.image("gamewinscreen","../src/assets/gamewinscreen.png")}create(){this.chillMusic=this.sound.add("chillbuster"),this.chillMusic.play({loop:!0,volume:.1}),this.add.image(512,300,"gamewinscreen"),this.add.text(350,450,"Score"+this.finalScore,{fontSize:"32px",fill:"#fff"}),this.pointer=this.input.activePointer,this.input.mouse.disableContextMenu(),this.input.on("pointerup",e=>{this.pointer.leftButtonReleased()&&(this.chillMusic.pause(),h(this.leadername,this.finalScore),this.scene.start("mainMenu"))})}update(){}}class n extends Phaser.Scene{constructor(){super("highScores")}init(e){this.board=e.board}preload(){}create(){this.board.sort((e,s)=>e.score<s.score?1:e.score>s.score?-1:0),this.add.text(350,100,"LeaderBoard",{fontSize:"32px",fill:"#fff"}),this.add.text(350,200,this.board[1].user+" : "+this.board[1].score,{fontSize:"32px",fill:"#fff"}),this.add.text(350,300,this.board[2].user+" : "+this.board[2].score,{fontSize:"32px",fill:"#fff"}),this.add.text(350,400,this.board[3].user+" : "+this.board[3].score,{fontSize:"32px",fill:"#fff"}),this.pointer=this.input.activePointer,this.input.mouse.disableContextMenu(),this.input.on("pointerup",e=>{this.pointer.leftButtonReleased()&&this.scene.start("mainMenu")})}update(){}}var c={type:Phaser.AUTO,width:1024,height:600,background:"#ffffff",physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[a,r,l,o,n]};new Phaser.Game(c)}]);